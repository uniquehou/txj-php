<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
    <title>空课表收集</title>
    {%  load static %}
    <link rel="stylesheet" href="{% static 'css/mui.min.css' %}" />
    <style>
		.mui-content {
			margin-top: 20px;
		}
		.mui-input-row label {
				width: 22%;
		}
		.mui-input-row label~input,
		.mui-input-row label~select,
		.mui-input-row label~textarea {
			width: 78%;
		}
    	table {
    		font-family: "楷体";
    		margin-right: 10px;
<<<<<<< HEAD
    	}
    	td {
    		/*border: #000 solid 2px;*/
=======
    		margin-top: 10px;
    	}
    	td {
>>>>>>> 3370ac6aff8a144f24ff63e47d53ab6044855f8b
    		padding: 2px;
    	}
    	td textarea {
    		width: 100%;
    		height: 80px;
    		font-size: 10px;
    		resize: none;
    		padding: 2px;
    		margin-bottom: 0px;
    	}
    	.mui-content {
    		margin-bottom: 20px;
    	}
<<<<<<< HEAD
=======
    	.week {
    		margin: 10px;
    	}
    	th {
    		/*border: 2px #999 solid;*/
    	}
>>>>>>> 3370ac6aff8a144f24ff63e47d53ab6044855f8b
    </style>
	<script type="text/javascript">
		function add_free(elem) {
			mui.prompt("备注", "如1-8周，没有可为空", "空课时间段", function (e) {
				if (e.index == 1)
<<<<<<< HEAD
					elem.value = "空( " + e.value + " )";
			});
		}
=======
					if (e.value)
						elem.value = "空( " + e.value + " )";
					else
						elem.value = "空";
			});
			div = document.getElementsByClassName("mui-popup-input")[0];
			div.childNodes[0].focus();
			mui.toast(div.childNodes[0].nodeName);
			// mui.toast("abc");
			}
>>>>>>> 3370ac6aff8a144f24ff63e47d53ab6044855f8b
	</script>
</head>
<body>
	<header class="mui-bar mui-bar-nav">
		{% ifequal open '1' %}
			<a class="mui-action-back mui-icon mui-icon-back"></a>
		{% endifequal %}
		<h1 class="mui-title">{{ organic_name }}空课表收集</h1>
	</header>
	
	<div class="mui-content">
		{% ifequal open '0' %}
		<h1 class="mui-text-center">此活动尚未开始</h1>
		{% else %}
		
	    <form id="form" method="post" action="{% url 'FreeCourse:submit' %}">
		    {% csrf_token %}
		    <input type="hidden" id="id" name="id" value="{{ id }}">
		    <input type="hidden" id="reupdate" name="reupdate" value="0">
		    
		    <div class="mui-input-group username"><div class="mui-input-row">
		        <label>姓名</label>
<<<<<<< HEAD
		    	<input type="text" id="name" name="name" class="mui-input-clear" value="" placeholder="姓名+联系方式，如小明17812345678">
=======
		    	<input type="text" id="name" name="name" class="mui-input-clear" value="" placeholder="姓名">
		    </div></div>
		    <div class="mui-input-group username"><div class="mui-input-row">
		        <label>联系方式</label>
		    	<input type="text" id="contact" name="contact" class="mui-input-clear" value="" placeholder="手机号">
>>>>>>> 3370ac6aff8a144f24ff63e47d53ab6044855f8b
		    </div></div>
		    
		    <table>
		        <thead class="week">
		            <th></th>
		            <th>周一</th>
		            <th>周二</th>
		            <th>周三</th>
		            <th>周四</th>
		            <th>周五</th>
		            <th>周六</th>
		            <th>周日</th>
		        </thead>
		
		        <tr>
		            <th>1 &nbsp; 2</th>
		            <td><textarea id="course_1" name='course_1' placeholder="添加空课" onclick="add_free(this)"></textarea></td>
		            <td><textarea id="course_6" name='course_6' placeholder="添加空课" onclick="add_free(this)"></textarea></td>
		            <td><textarea id="course_11" name='course_11' placeholder="添加空课" onclick="add_free(this)"></textarea></td>
		            <td><textarea id="course_16" name='course_16' placeholder="添加空课" onclick="add_free(this)"></textarea></td>
		            <td><textarea id="course_21" name='course_21' placeholder="添加空课" onclick="add_free(this)"></textarea></td>
<<<<<<< HEAD
		            <td><textarea id="course_26" name='course_26' placeholder="添加空课" onclick="add_free(this)"></textarea></td>
		            <td><textarea id="course_31" name='course_31' placeholder="添加空课" onclick="add_free(this)"></textarea></td>
=======
		            <td><textarea id="course_26" name='course_26' placeholder="添加空课" onclick="add_free(this)">空</textarea></td>
		            <td><textarea id="course_31" name='course_31' placeholder="添加空课" onclick="add_free(this)">空</textarea></td>
>>>>>>> 3370ac6aff8a144f24ff63e47d53ab6044855f8b
		        </tr>
		        <tr>
		        	<th>3 &nbsp; 4</th>
		            <td><textarea id="course_2" name='course_2' placeholder="添加空课" onclick="add_free(this)"></textarea></td>
		            <td><textarea id="course_7" name='course_7' placeholder="添加空课" onclick="add_free(this)"></textarea></td>
		            <td><textarea id="course_12" name='course_12' placeholder="添加空课" onclick="add_free(this)"></textarea></td>
		            <td><textarea id="course_17" name='course_17' placeholder="添加空课" onclick="add_free(this)"></textarea></td>
		            <td><textarea id="course_22" name='course_22' placeholder="添加空课" onclick="add_free(this)"></textarea></td>
<<<<<<< HEAD
		            <td><textarea id="course_27" name='course_27' placeholder="添加空课" onclick="add_free(this)"></textarea></td>
		            <td><textarea id="course_32" name='course_32' placeholder="添加空课" onclick="add_free(this)"></textarea></td>
=======
		            <td><textarea id="course_27" name='course_27' placeholder="添加空课" onclick="add_free(this)">空</textarea></td>
		            <td><textarea id="course_32" name='course_32' placeholder="添加空课" onclick="add_free(this)">空</textarea></td>
>>>>>>> 3370ac6aff8a144f24ff63e47d53ab6044855f8b
		        </tr>
		
		        <tr>
		            <th>5 &nbsp; 6</th>
		            <td><textarea id="course_3" name='course_3' placeholder="添加空课" onclick="add_free(this)"></textarea></td>
		            <td><textarea id="course_8" name='course_8' placeholder="添加空课" onclick="add_free(this)"></textarea></td>
		            <td><textarea id="course_13" name='course_13' placeholder="添加空课" onclick="add_free(this)"></textarea></td>
		            <td><textarea id="course_18" name='course_18' placeholder="添加空课" onclick="add_free(this)"></textarea></td>
		            <td><textarea id="course_23" name='course_23' placeholder="添加空课" onclick="add_free(this)"></textarea></td>
<<<<<<< HEAD
		            <td><textarea id="course_28" name='course_28' placeholder="添加空课" onclick="add_free(this)"></textarea></td>
		            <td><textarea id="course_33" name='course_33' placeholder="添加空课" onclick="add_free(this)"></textarea></td>
=======
		            <td><textarea id="course_28" name='course_28' placeholder="添加空课" onclick="add_free(this)">空</textarea></td>
		            <td><textarea id="course_33" name='course_33' placeholder="添加空课" onclick="add_free(this)">空</textarea></td>
>>>>>>> 3370ac6aff8a144f24ff63e47d53ab6044855f8b
		        </tr>
		        <tr>
		        	<th>7 &nbsp; 8</th>
		            <td><textarea id="course_4" name='course_4' placeholder="添加空课" onclick="add_free(this)"></textarea></td>
		            <td><textarea id="course_9" name='course_9' placeholder="添加空课" onclick="add_free(this)"></textarea></td>
		            <td><textarea id="course_14" name='course_14' placeholder="添加空课" onclick="add_free(this)"></textarea></td>
		            <td><textarea id="course_19" name='course_19' placeholder="添加空课" onclick="add_free(this)"></textarea></td>
		            <td><textarea id="course_24" name='course_24' placeholder="添加空课" onclick="add_free(this)"></textarea></td>
<<<<<<< HEAD
		            <td><textarea id="course_29" name='course_29' placeholder="添加空课" onclick="add_free(this)"></textarea></td>
		            <td><textarea id="course_34" name='course_34' placeholder="添加空课" onclick="add_free(this)"></textarea></td>
=======
		            <td><textarea id="course_29" name='course_29' placeholder="添加空课" onclick="add_free(this)">空</textarea></td>
		            <td><textarea id="course_34" name='course_34' placeholder="添加空课" onclick="add_free(this)">空</textarea></td>
>>>>>>> 3370ac6aff8a144f24ff63e47d53ab6044855f8b
		        </tr>
		
		        <tr>
		            <th>晚</th>
		            <td><textarea id="course_5" name='course_5' placeholder="添加空课" onclick="add_free(this)"></textarea></td>
		            <td><textarea id="course_10" name='course_10' placeholder="添加空课" onclick="add_free(this)"></textarea></td>
		            <td><textarea id="course_15" name='course_15' placeholder="添加空课" onclick="add_free(this)"></textarea></td>
		            <td><textarea id="course_20" name='course_20' placeholder="添加空课" onclick="add_free(this)"></textarea></td>
		            <td><textarea id="course_25" name='course_25' placeholder="添加空课" onclick="add_free(this)"></textarea></td>
<<<<<<< HEAD
		            <td><textarea id="course_30" name='course_30' placeholder="添加空课" onclick="add_free(this)"></textarea></td>
		            <td><textarea id="course_35" name='course_35' placeholder="添加空课" onclick="add_free(this)"></textarea></td>
=======
		            <td><textarea id="course_30" name='course_30' placeholder="添加空课" onclick="add_free(this)">空</textarea></td>
		            <td><textarea id="course_35" name='course_35' placeholder="添加空课" onclick="add_free(this)">空</textarea></td>
>>>>>>> 3370ac6aff8a144f24ff63e47d53ab6044855f8b
		        </tr>
		    </table>
	    </form>

	    <div class="mui-content-padded">
			<button id='login' class="mui-btn mui-btn-block mui-btn-primary" onclick="submit()">提交</button>
		</div>

	    <center>
	    <!--分享到QQ-->
	    <div class="share">
		    <script type="text/javascript">
				(function(){
					var p = {
					url:location.href, /*获取URL，可加上来自分享到QQ标识，方便统计*/
					desc:'', /*分享理由(风格应模拟用户对话),支持多分享语随机展现（使用|分隔）*/
<<<<<<< HEAD
					title:'空课表收集', /*分享标题(可选)*/
=======
					title: '{{ organic_name }}空课表收集', /*分享标题(可选)*/
>>>>>>> 3370ac6aff8a144f24ff63e47d53ab6044855f8b
					summary:'{{ organic_name }}空课表收集 ', /*分享摘要(可选)*/
					pics:'', /*分享图片(可选)*/
					flash: '', /*视频地址(可选)*/
					site:'紫色沙漏', /*分享来源(可选) 如：QQ分享*/
					style:'101',
					width:96,
					height:24
					};
					var s = [];
					for(var i in p){
					s.push(i + '=' + encodeURIComponent(p[i]||''));
					}
					document.write(['<a class="qcShareQQDiv" href="http://connect.qq.com/widget/shareqq/index.html?',s.join('&'),'" target="_blank">分享到QQ</a>'].join(''));
				})();
			</script>
			<script src="http://connect.qq.com/widget/loader/loader.js" widget="shareqq" charset="utf-8"></script>
		</div>
		</center>
		{% endifequal %}
	</div>
	<script type="text/javascript" src="http://apps.bdimg.com/libs/mui/2.8.0/js/mui.min.js" ></script>
	<script type="text/javascript">
		mui.init();
		function submit() {
			name = document.getElementById("name").value
			if (name=="")
				mui.alert("请输入你的姓名");
			else if (document.getElementById("reupdate").value=='1')
				mui.alert("你已提交过，请勿重复提交")
			else {
				mui.ajax("{% url 'FreeCourse:submit' %}", {
					data: {
						"csrfmiddlewaretoken": document.getElementsByTagName('input')[0].value,
<<<<<<< HEAD
						"name": document.getElementById("name").value,
						"id": document.getElementById("id").value,
						"course_1": document.getElementById("course_1").value,
						"course_6": document.getElementById("course_6").value,
						"course_11": document.getElementById("course_11").value,
						"course_16": document.getElementById("course_16").value,
						"course_21": document.getElementById("course_21").value,
						"course_26": document.getElementById("course_26").value,
						"course_31": document.getElementById("course_31").value,
						"course_2": document.getElementById("course_2").value,
						"course_7": document.getElementById("course_7").value,
						"course_12": document.getElementById("course_12").value,
						"course_17": document.getElementById("course_17").value,
						"course_22": document.getElementById("course_22").value,
						"course_27": document.getElementById("course_27").value,
						"course_32": document.getElementById("course_32").value,
						"course_3": document.getElementById("course_3").value,
						"course_8": document.getElementById("course_8").value,
						"course_13": document.getElementById("course_13").value,
						"course_18": document.getElementById("course_18").value,
						"course_23": document.getElementById("course_23").value,
						"course_28": document.getElementById("course_28").value,
						"course_33": document.getElementById("course_33").value,
						"course_4": document.getElementById("course_4").value,
						"course_9": document.getElementById("course_9").value,
						"course_14": document.getElementById("course_14").value,
						"course_19": document.getElementById("course_19").value,
						"course_24": document.getElementById("course_24").value,
						"course_29": document.getElementById("course_29").value,
						"course_34": document.getElementById("course_34").value,
						"course_5": document.getElementById("course_5").value,
						"course_10": document.getElementById("course_10").value,
						"course_15": document.getElementById("course_15").value,
						"course_20": document.getElementById("course_20").value,
						"course_25": document.getElementById("course_25").value,
						"course_30": document.getElementById("course_30").value,
						"course_35": document.getElementById("course_35").value,
=======
						"name": document.getElementById("name").value.trim(),
						"contact": document.getElementById("contact").value.trim(),
						"id": document.getElementById("id").value.trim(),
						"course_1": document.getElementById("course_1").value.trim(),
						"course_6": document.getElementById("course_6").value.trim(),
						"course_11": document.getElementById("course_11").value.trim(),
						"course_16": document.getElementById("course_16").value.trim(),
						"course_21": document.getElementById("course_21").value.trim(),
						"course_26": document.getElementById("course_26").value.trim(),
						"course_31": document.getElementById("course_31").value.trim(),
						"course_2": document.getElementById("course_2").value.trim(),
						"course_7": document.getElementById("course_7").value.trim(),
						"course_12": document.getElementById("course_12").value.trim(),
						"course_17": document.getElementById("course_17").value.trim(),
						"course_22": document.getElementById("course_22").value.trim(),
						"course_27": document.getElementById("course_27").value.trim(),
						"course_32": document.getElementById("course_32").value.trim(),
						"course_3": document.getElementById("course_3").value.trim(),
						"course_8": document.getElementById("course_8").value.trim(),
						"course_13": document.getElementById("course_13").value.trim(),
						"course_18": document.getElementById("course_18").value.trim(),
						"course_23": document.getElementById("course_23").value.trim(),
						"course_28": document.getElementById("course_28").value.trim(),
						"course_33": document.getElementById("course_33").value.trim(),
						"course_4": document.getElementById("course_4").value.trim(),
						"course_9": document.getElementById("course_9").value.trim(),
						"course_14": document.getElementById("course_14").value.trim(),
						"course_19": document.getElementById("course_19").value.trim(),
						"course_24": document.getElementById("course_24").value.trim(),
						"course_29": document.getElementById("course_29").value.trim(),
						"course_34": document.getElementById("course_34").value.trim(),
						"course_5": document.getElementById("course_5").value.trim(),
						"course_10": document.getElementById("course_10").value.trim(),
						"course_15": document.getElementById("course_15").value.trim(),
						"course_20": document.getElementById("course_20").value.trim(),
						"course_25": document.getElementById("course_25").value.trim(),
						"course_30": document.getElementById("course_30").value.trim(),
						"course_35": document.getElementById("course_35").value.trim(),
>>>>>>> 3370ac6aff8a144f24ff63e47d53ab6044855f8b
					},
					type: "POST",
					dateType: "text",
					success: function(data) {
						if (data==1) {
							mui.alert("提交成功");
							document.getElementById("reupdate").value = 1;
						}
						else if (data==2)
							mui.alert("你已提交过，请勿重复提交");
					},
					error: function() {
						mui.alert("服务器繁忙，请稍后重试");
					}
				});
			}
		}
	</script>
</body>
</html>
